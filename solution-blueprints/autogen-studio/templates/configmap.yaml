# Copyright Â© Advanced Micro Devices, Inc., or its affiliates.
#
# SPDX-License-Identifier: MIT

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "release.fullname" . }}-config
  labels:
    app.kubernetes.io/name: {{ .Chart.Name }}
data:
{{- $files := .Files }}
{{- $root := . }}
{{- range $path, $_ := .Files.Glob "src/*" }}
  {{ $key := $path | trimPrefix "src/" }}
  {{- if eq $key "default-gallery.json" }}
  {{- $key }}: |-
{{ include "default.gallery.json" $root | indent 4 }}
  {{- else }}
  {{- $key }}: |
{{ $files.Get $path | indent 4 }}
  {{- end }}
{{- end }}
